\documentclass{ltjsreport}
%\usepackage[dvipdfmx]{color}
\usepackage{titlesec}
\usepackage{tocloft}
\usepackage{booktabs}
\usepackage{mathcomp}
\usepackage{array}
\usepackage{mathtools,amssymb}
\usepackage{siunitx}
\usepackage{multirow}
\usepackage{tabularx}
\usepackage{subcaption}
\usepackage{float}
\usepackage{listings,jvlisting}
\lstset{
	basicstyle={\ttfamily},
	identifierstyle={\small},
	commentstyle={\smallitshape},
	keywordstyle={\small\bfseries},
	ndkeywordstyle={\small},
	stringstyle={\small\ttfamily},
	frame={tb},
	breaklines=true,
	columns=[l]{fullflexible},
	numbers=left,
	xrightmargin=0zw,
	xleftmargin=3zw,
	numberstyle={\scriptsize},
	stepnumber=1,
	numbersep=1zw,
	lineskip=-0.5ex,
	tabsize=2
}
\renewcommand{\lstlistingname}{ソースコード}

\titleformat{\chapter}% command
    [block]% shape
    {\bfseries\LARGE}% format
    {第 \thechapter 章}% label
    {0.5em}% sep
    {\leftline}% before-code
\titlespacing{\chapter}
    {0pt}% left
    {18pt}% before-sep
    {6pt}% after-sep

\renewcommand{\cftchapfont}{\normalsize}
% 章ページ番号のフォント
\renewcommand{\cftchappagefont}{\normalsize}
% 章番号の後に「:」を付ける
\renewcommand{\cftchapaftersnum}{:}
% 章見出しのインデント幅
\renewcommand{\cftchapnumwidth}{5em}
% 章見出しからページ番号までを点線でつなぐ
\renewcommand{\cftchapleader}{\cftdotfill{\cftchapdotsep}}
% 点線の点間隔の調整
\renewcommand{\cftchapdotsep}{\cftdotsep}
% 章見出しの上にある余白を調整
\setlength{\cftbeforechapskip}{0pt}

\renewcommand{\caption}

\begin{document}
\begin{titlepage}
\begin{center}
\large 令和4年度\\
\vspace{30pt}
\large 卒業研究報告書\\
\vspace{50pt}
\Large\textgt{仮想筋電義手の開発に関する研究}\\
\vspace{80pt}
\large 指導教官　戸崎哲也\\
\large 報告者\hspace{23pt}河合将暉\\
\vspace{30pt}
\large 神戸市立工業高等専門学校\\
\large 電子工学科
\end{center}
\end{titlepage}
\clearpage

\begin{center}
\large (論文要旨)
\end{center}
\pagenumbering{roman}
あああああああああああああああああああああああああああああああああああ
あああああああああああああああああああああああああああああああああああ
あああああああああああああああああああああああああああああああああああ
あああああああああああああああああああああああああああああああああああ
あああああああああああああああああああああああああああああああああああ
あああああああああああああああああああああああああああああああああああ
あああああああああああああああああああああああああああああああああああ

\clearpage
\setcounter{tocdepth}{3}
\tableofcontents

\pagenumbering{arabic}
\setcounter{page}{1}
\chapter{はじめに}
	上肢切断者が筋電義手を装着する際，自在に扱うことができるように
	訓練を行う必要がある．VRを用いた筋電義手トレーニングの効果につ
	いては先行研究\cite{ref:1}\cite{ref:2}で検討されているが，
	3Dモデルのリアリティについて検討されていなかったため, 本研究では
	仮想筋電義手モデルのリアリティによる訓練効果や幻肢痛緩和効果に
	着目し3Dスキャナで取り込んだ仮想筋電義手モデルを用いたVRトレーニング
	システムを構成し，その見た目によって訓練効果に変化があるかを評価する
	ことを目的とする．また，近年では株式会社mediVRが販売する``カグラ''という
	という製品は上肢機能障害者のリハビリテーションのために運用されるなど
	VRトレーニングシステムは義手装具者以外にも需要が高まっている．

	本研究は2023年度，神戸高専Digital Faburication Labに新規導入された
	ハンディ3Dスキャナ``Ein Scan HX''の活用方法の一例としても後続の研究に
	活用していただきたい．

\chapter{解説}
	本章では，本研究で利用した``Ein Scan HX''をはじめ各種ソフトウェアの利用方法
	およびその使い方について解説していく．また，機器を選定した理由についても記述する．

	\section{EinScan HX}
		EinScan HXは株式会社サンステラが提供するハンディ3Dスキャナである．
		主な使用用途としては，工業製品などの比較的大きな物をスキャンし，
		リバースエンジニアリングや測定などに用いられている．
		製品仕様については次項で解説する．

		\subsection{製品仕様}
			EinScan HXの製品仕様について表\refeq{tab:EinScan}に示す．
			\begin{table}[H]
			\begin{center}
			\caption{EinScan HXの製品仕様}
			\label{tab:EinScan}
			\begin{tabular}{c|cc} \toprule
				スキャン形式&Rapidスキャン&レーザースキャン\\ \hline
				スキャン精度&0.05\,mm&0.04\,mm\\
				ポイント間隔&0.25～3.00\,mm&0.05～3.00\,mm\\
				被写体長3D精度&±0.1\,mm&±0.06\,mm\\
				シングルスキャン精度&420 × 440\,mm&\\
				光源&ブルーLED&ブルーレーザー7本\\
				被写体深度&&\\
				対象物との距離&&\\
				テクスチャスキャン&&\\
				安全性&&\\
				データ出力&&\\
				本体サイズ&&\\
				本体重量&&\\
				\bottomrule
			\end{tabular}
			\end{center}
			\end{table}
			ここで，被写体長3D精度というのはスキャン時に取得するポイントの
			最大累積誤差を示したもので，測定する点数が増える場合や
			取得点の距離が大きい場合に誤差が累積し，大きくなっていく．

			本研究では，腕の3Dオブジェクトにテクスチャを用いることを前提としているため，
			スキャン形式をRapidスキャンモードで,3Dモデルのファイルサイズが大きくなり過ぎないように
			頂点数を50万点で出力した．また，出力形式は元からテクスチャがメッシュに割当されている
			.obj形式で出力した．

	\section{Blender}
	
		Blenderとは，オープンソースの完全無料統合型3DCG・2D・映像編集ソフトウェア
		である．本研究では``EinScan HX''によって出力した.obj形式の3Dモデルを
		編集する目的で使用した．次項からは本研究で用いたBlenderの機能について解説する．
		\subsection{スムージング}
			スムージング機能とは，3Dオブジェクト表面をペイントソフトのようになぞるだけで
			表面を平滑化し，頂点を揃える機能である．
		\subsection{ボーン構成}
			ボーンは，3Dオブジェクトを変形させる際に頂点の移動を制御する支柱の役割を果たす機能である．
		\subsection{ウェイトペイント}
			ウェイトペイントは，ボーンによって制御された頂点の変形の度合いをスペクトルで表示したもので，
			赤になるほど大きく変形し，青に近づくほど変形しなくなる．
			関節部分は赤色に，それ以外は青色にウェイトペイントを設定する．
			自然な変形のためには，関節部分の赤色からグラデーションのように広げていくと3Dオブジェクトが
			自然に変形する．
	\section{Unity}
		Unityは，
		\subsection{座標系}
		\subsection{シェーダー}
			\subsubsection{既存シェーダー}
			\subsubsection{Reflex Shader 2.2}
		\subsection{カメラ}
		\subsection{C\#スクリプト}
		\subsection{オブジェクト}
		\subsection{衝突判定}
		\subsection{ペアレント}
		\subsection{コンストレイント}
		\subsection{物理演算}
		\subsection{エディタ設定}
		\subsection{プラグイン}
			\subsubsection{FVRsdk}
			\subsubsection{Xcharts}
			\subsubsection{Android Logcat}
			\subsubsection{XR Interaction Toolkit}
			\subsubsection{Google VR}
		\subsection{ビルド}
			\subsubsection{iOS}
			\subsubsection{Xcode}
			\subsubsection{Android OS}
	\section{FirstVR}
		\subsection{デバイス構成}
		\subsection{筋変位センサ}
		\subsection{トラッキング}
		\subsection{キャリブレーション}
		\subsection{BLE通信}
	\section{Meta Quest2}
		\subsection{デバイス構成}
	\section{rasberry py}
	
\chapter{研究手順}
	\section{使用器具}
	\section{3Dスキャナ}
		\subsection{3Dモデルの取り込み}
		\subsection{出力形式}
	\section{Blender}
		\subsection{スムージング処理}
		\subsection{ボーン配置}
	\section{Unity}
		\subsection{オブジェクトの処理}
		\subsection{ステージ構成}
		\subsection{アニメーション設定}
			\subsubsection{アニメーションクリップ作成}
			\subsubsection{アニメーター設定}
		\subsection{オブジェクト保持}
		\subsection{衝突判定}
		\subsection{腕の回転}
		\subsection{カメラ位置}
		\subsection{コンストレイント}
		\subsection{UI}
		

	\section{FirstVR}
	\section{ビルド}
	\section{評価}
\chapter{研究結果}
\chapter{まとめ}

\chapter{今後の課題}

\begin{thebibliography}{99}

	\bibitem{ref:1}
	芝軒 太郎 他.``VRを利用した筋電義手操作トレーニング
	システムの開発と仮想 Box and Block Test の実現''.
	JRSJ. 2012 July.

	\bibitem{ref:2}
	Osumi M, et al.
	``Characteristics of Phantom Limb Pain Alleviated
	with Virtual Reality Rehabilitation''.
	Pain Med. 2019 May.

	\bibitem{ref:3}
	H2L.Inc.,Tokyo106-0032,Japan;satoshi.hosono@h2l.jp

	\bibitem{ref:4}
	Tamon Miyake, etal``Gait Phase Detection Based on Muscle Deformation
	with Static Standing-Based Calibration''.
	MDPI. 2021 Feb

	\bibitem{ref:5}
	株式会社サンステラ，https://www.einscan.jp/einscan-hx

\end{thebibliography}
\end{document}